{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/mennu/Documents/GitHub/SpaceDJCommand/app/api/contact/route.ts"],"sourcesContent":["import { Resend } from \"resend\"\nimport { NextResponse } from \"next/server\"\n\nconst resend = new Resend(process.env.RESEND_API_KEY)\n\nconst ADMIN_EMAIL = \"adam@phillycustomdj.com\"\n\nfunction buildConfirmationHtml(data: {\n  name: string\n  eventDate: string\n  eventType: string\n  venue: string\n  message: string\n}) {\n  return `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n</head>\n<body style=\"margin:0;padding:0;background-color:#0B0F1C;color:#e0e0e0;font-family:'Courier New',Courier,monospace;\">\n  <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#0B0F1C;padding:40px 20px;\">\n    <tr>\n      <td align=\"center\">\n        <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" style=\"max-width:600px;width:100%;\">\n          <!-- Header -->\n          <tr>\n            <td style=\"padding:30px;text-align:center;border:1px solid #39FF14;border-bottom:none;background-color:#0d1225;\">\n              <h1 style=\"margin:0;font-size:28px;font-weight:900;letter-spacing:6px;color:#39FF14;text-transform:uppercase;text-shadow:0 0 10px #39FF1480;\">\n                SPACE DJ COMMAND\n              </h1>\n              <p style=\"margin:8px 0 0;font-size:11px;letter-spacing:4px;color:#888;text-transform:uppercase;\">\n                Transmission Confirmed\n              </p>\n            </td>\n          </tr>\n          <!-- Body -->\n          <tr>\n            <td style=\"padding:30px;border:1px solid #333;border-top:none;background-color:#111827;\">\n              <p style=\"margin:0 0 20px;font-size:14px;color:#ccc;line-height:1.6;\">\n                Greetings, <strong style=\"color:#39FF14;\">${data.name}</strong>.\n              </p>\n              <p style=\"margin:0 0 24px;font-size:14px;color:#ccc;line-height:1.6;\">\n                Your deployment request has been received by Space DJ Command. Our team is reviewing your transmission and will respond within 48 standard hours.\n              </p>\n\n              <!-- Mission Details -->\n              <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"margin:0 0 24px;border:1px solid #333;background-color:#0B0F1C;\">\n                <tr>\n                  <td style=\"padding:16px;\">\n                    <p style=\"margin:0 0 4px;font-size:10px;letter-spacing:3px;color:#39FF14;text-transform:uppercase;\">Mission Details</p>\n                  </td>\n                </tr>\n                <tr>\n                  <td style=\"padding:0 16px 12px;\">\n                    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n                      <tr>\n                        <td style=\"padding:6px 0;font-size:12px;color:#888;width:120px;vertical-align:top;\">Event Type</td>\n                        <td style=\"padding:6px 0;font-size:12px;color:#e0e0e0;\">${data.eventType}</td>\n                      </tr>\n                      <tr>\n                        <td style=\"padding:6px 0;font-size:12px;color:#888;vertical-align:top;\">Date</td>\n                        <td style=\"padding:6px 0;font-size:12px;color:#e0e0e0;\">${data.eventDate}</td>\n                      </tr>\n                      <tr>\n                        <td style=\"padding:6px 0;font-size:12px;color:#888;vertical-align:top;\">Venue</td>\n                        <td style=\"padding:6px 0;font-size:12px;color:#e0e0e0;\">${data.venue}</td>\n                      </tr>\n                      ${data.message ? `\n                      <tr>\n                        <td style=\"padding:6px 0;font-size:12px;color:#888;vertical-align:top;\">Message</td>\n                        <td style=\"padding:6px 0;font-size:12px;color:#e0e0e0;\">${data.message}</td>\n                      </tr>` : \"\"}\n                    </table>\n                  </td>\n                </tr>\n              </table>\n\n              <p style=\"margin:0;font-size:12px;color:#888;line-height:1.6;\">\n                If you need to amend your request, reply to this transmission.\n              </p>\n            </td>\n          </tr>\n          <!-- Footer -->\n          <tr>\n            <td style=\"padding:20px;text-align:center;\">\n              <p style=\"margin:0;font-size:10px;letter-spacing:2px;color:#555;text-transform:uppercase;\">\n                Space DJ Command &mdash; Elite Musical Command Across Known and Unknown Space\n              </p>\n            </td>\n          </tr>\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>`\n}\n\nfunction buildNotificationHtml(data: {\n  name: string\n  email: string\n  eventDate: string\n  eventType: string\n  venue: string\n  message: string\n}) {\n  return `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n</head>\n<body style=\"margin:0;padding:0;background-color:#0B0F1C;color:#e0e0e0;font-family:'Courier New',Courier,monospace;\">\n  <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#0B0F1C;padding:40px 20px;\">\n    <tr>\n      <td align=\"center\">\n        <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" style=\"max-width:600px;width:100%;\">\n          <!-- Header -->\n          <tr>\n            <td style=\"padding:30px;text-align:center;border:1px solid #39FF14;border-bottom:none;background-color:#0d1225;\">\n              <h1 style=\"margin:0;font-size:28px;font-weight:900;letter-spacing:6px;color:#39FF14;text-transform:uppercase;text-shadow:0 0 10px #39FF1480;\">\n                INCOMING TRANSMISSION\n              </h1>\n              <p style=\"margin:8px 0 0;font-size:11px;letter-spacing:4px;color:#888;text-transform:uppercase;\">\n                New Deployment Request\n              </p>\n            </td>\n          </tr>\n          <!-- Body -->\n          <tr>\n            <td style=\"padding:30px;border:1px solid #333;border-top:none;background-color:#111827;\">\n              <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"border:1px solid #333;background-color:#0B0F1C;\">\n                <tr>\n                  <td style=\"padding:16px;\">\n                    <p style=\"margin:0 0 4px;font-size:10px;letter-spacing:3px;color:#39FF14;text-transform:uppercase;\">Contact Details</p>\n                  </td>\n                </tr>\n                <tr>\n                  <td style=\"padding:0 16px 16px;\">\n                    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n                      <tr>\n                        <td style=\"padding:6px 0;font-size:12px;color:#888;width:120px;vertical-align:top;\">Name</td>\n                        <td style=\"padding:6px 0;font-size:12px;color:#e0e0e0;\">${data.name}</td>\n                      </tr>\n                      <tr>\n                        <td style=\"padding:6px 0;font-size:12px;color:#888;vertical-align:top;\">Email</td>\n                        <td style=\"padding:6px 0;font-size:12px;color:#e0e0e0;\">\n                          <a href=\"mailto:${data.email}\" style=\"color:#39FF14;text-decoration:none;\">${data.email}</a>\n                        </td>\n                      </tr>\n                      <tr>\n                        <td style=\"padding:6px 0;font-size:12px;color:#888;vertical-align:top;\">Event Type</td>\n                        <td style=\"padding:6px 0;font-size:12px;color:#e0e0e0;\">${data.eventType}</td>\n                      </tr>\n                      <tr>\n                        <td style=\"padding:6px 0;font-size:12px;color:#888;vertical-align:top;\">Date</td>\n                        <td style=\"padding:6px 0;font-size:12px;color:#e0e0e0;\">${data.eventDate}</td>\n                      </tr>\n                      <tr>\n                        <td style=\"padding:6px 0;font-size:12px;color:#888;vertical-align:top;\">Venue</td>\n                        <td style=\"padding:6px 0;font-size:12px;color:#e0e0e0;\">${data.venue}</td>\n                      </tr>\n                      ${data.message ? `\n                      <tr>\n                        <td style=\"padding:6px 0;font-size:12px;color:#888;vertical-align:top;\">Message</td>\n                        <td style=\"padding:6px 0;font-size:12px;color:#e0e0e0;\">${data.message}</td>\n                      </tr>` : \"\"}\n                    </table>\n                  </td>\n                </tr>\n              </table>\n            </td>\n          </tr>\n          <!-- Footer -->\n          <tr>\n            <td style=\"padding:20px;text-align:center;\">\n              <p style=\"margin:0;font-size:10px;letter-spacing:2px;color:#555;text-transform:uppercase;\">\n                Space DJ Command &mdash; Automated Notification\n              </p>\n            </td>\n          </tr>\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>`\n}\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json()\n\n    const { name, email, eventDate, eventType, venue, message } = body\n\n    if (!name || !email || !eventDate || !eventType || !venue) {\n      return NextResponse.json(\n        { error: \"Missing required fields.\" },\n        { status: 400 }\n      )\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    if (!emailRegex.test(email)) {\n      return NextResponse.json(\n        { error: \"Invalid email address.\" },\n        { status: 400 }\n      )\n    }\n\n    const templateData = {\n      name: String(name),\n      email: String(email),\n      eventDate: String(eventDate),\n      eventType: String(eventType),\n      venue: String(venue),\n      message: message ? String(message) : \"\",\n    }\n\n    // Send both emails in parallel\n    const [confirmationResult, notificationResult] = await Promise.all([\n      // Confirmation email to the person who submitted\n      resend.emails.send({\n        from: \"Space DJ Command <hello@spacedjcommand.com>\",\n        to: [templateData.email],\n        subject: \"Transmission Received -- Space DJ Command\",\n        html: buildConfirmationHtml(templateData),\n      }),\n\n      // Notification email to admin\n      resend.emails.send({\n        from: \"Space DJ Command <hello@spacedjcommand.com>\",\n        to: [ADMIN_EMAIL],\n        replyTo: templateData.email,\n        subject: `New Deployment Request from ${templateData.name}`,\n        html: buildNotificationHtml(templateData),\n      }),\n    ])\n\n    if (confirmationResult.error || notificationResult.error) {\n      console.error(\"Resend error:\", confirmationResult.error, notificationResult.error)\n      return NextResponse.json(\n        { error: \"Failed to send emails. Please try again.\" },\n        { status: 500 }\n      )\n    }\n\n    return NextResponse.json({ success: true })\n  } catch (err) {\n    console.error(\"Contact API error:\", err)\n    return NextResponse.json(\n      { error: \"An unexpected error occurred.\" },\n      { status: 500 }\n    )\n  }\n}\n\n"],"names":[],"mappings":"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"}}]
}